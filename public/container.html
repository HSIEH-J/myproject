<!DOCTYPE html>
<html lang="en" style="height: 100vh; width: 100vw;">

    <head>
        <link rel="icon" href="images/favicon-20210512121052246.ico" type="image/x-icon" >
        <title>Container</title>
        <link href="css/styles.css" rel="stylesheet">
        <link href="css/block.css" rel="stylesheet">
    </head>
    
    <body>
        
        <div id="area">
            <!-- Sidebar-->
            <div id="sidebarArea">
                <div id="hamburger">
                    <div>
                        <button onclick="openSidebar()" class="smallIcon"><img src="images/hamburger.png"></button>
                    </div>
                    <div id="homepage"><u>HOMEPAGE</u></div>
                </div>
                <div id="sidebar" style="display: none;">
                    <!-- <div id="sidebarTop">
                        <div class="bar_item" id="homepage">Homepage</div>
                    </div> -->
                    <div id="sidebarTop">
                        <div id="logOut" onclick="logOut()">Log out</div>
                        <div onclick="closeSidebar()" class="close_button">&laquo;</div>
                    </div>
                    <div id="sidebarContent"></div>
                    <!-- <div id="sidebarBottom">
                        <div>Trash Can</div>
                    </div> -->
                </div>
            </div>
             <!-- main -->
            <div id="container">
                <div id="nav">
                    <div id="navTop">
                        <div id="searchBar">
                            <input type="text" id="search" placeholder="search...">
                            <select id="searchSelect">
                                <option>bookmark</option>
                                <option>folder</option>
                                <option>stickyNote</option>
                                <option>all</option>
                            </select>
                            <div id="searchImg">
                                <img src="images/search.svg" width="30px" height="30px" onclick="searchItem()">
                            </div>
                        </div>
                        <div id="new">
                            <div id="import">Import</div>
                            <div id="url" style="display: none;">
                                <div>
                                    <div style="text-align: left; margin-left: 3%; margin-top:3%;">URL</div>
                                    <input id="box" type="text" placeholder="https://">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="navBottom">
                        <div id="folderNav"> 
                            <div>
                                <img src="images/folder.svg" width=35px height=35px>
                            </div>
                            <div id="folderNameChange" class="class">homepage</div>
                            <div id="folderNav">
                                <img src="images/plus.svg" class="hover" id="plus" width=25px height=25px>
                            </div>
                        </div>
                        <div id="display">
                            <div class="hover">
                                <img src="images/board.svg" class="createIcon" id="boardIcon" style="display: none;">
                            </div>
                            <div class="hover">
                                <img src="images/sticky-note.svg" class="createIcon" id="noteIcon" style="display: none;">
                            </div>
                            <!-- <div class="flex hover">
                                <div>
                                    <img src="images/card.svg" class="changeIcon" id="cardIcon">
                                </div>
                                <div style="line-height: 40px;">Card</div>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div id="page">
                    <!-- <div class="frame bookmark" draggable="true" id="1">
                        <a href="https://evernote.com/intl/zh-tw/" class="thumbnailUrl" target="_blank">
                            <div class="top">
                                <div class="thumbnail">
                                  <img src="https://stylish-upload.s3.amazonaws.com/evernote.com1622744906768.jpeg" width=250>
                                </div>
                            </div>
                            <div class="info">
                                <div class='title'>evernote</div>
                            </div>
                        </a>
                        <div id="trashCan">
                            <img src="images/trash.svg" width="35px" height="35px" id="trash">
                        </div>
                    </div> -->
                </div> 
                <div id="waitingImg">
                    <img src="images/dino.gif" width="700px" height="500px">
                    <div id="loading">Loading...</div>
                </div>
            </div>
            <div id="parentData" style="display: none;"></div>
            <!--highlight area-->
            <div id="dataArea" style="display: none;">
                <img src="images/close.svg" class="hover" id="close" width="20px" height="20px">
                <div id="highlight" style="display: none;">
                    <img src="images/board-img.svg" style="margin-top: 2%;" width="700px" height="300px"><br>
                    <div>No Collection board</div>
                    <div>Click to create a new one</div>
                    <button id="click">Click</button>
                </div>
                <img src="images/plus.svg" class="hover" id="addBlock" width="20px" height="20px" style="display: none;">
            </div>
        </div>
       
        <!-- function icon => including add folder, create block.sticky note, trash can -->
        

        <footer>
        </footer>

        <script src="js/container.js"></script>
        <script src="js/bookmark.js"></script>
        <script src="js/folder.js"></script>
        <script src="js/drag.js"></script>
        <script src="js/sidebar.js"></script>
        <script src="js/subfolder.js"></script>
        <script src="js/search.js"></script>
     
        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io({
                auth:{
                    token:token
                }
            });
            socket.on("connect_error", (err) => {
                console.log(err)
            })
            socket.on("done", (msg)=>{
                console.log(msg);
                console.log(msg.id)
                const frame = document.getElementById(msg.id);
                console.log(frame)
                const img = frame.children[0].children[0].children[0].children[0];
                console.log(img)
                const title = frame.children[0].children[1].children[0];
                console.log(title)
                img.src = msg.thumbnail;
                title.innerHTML = msg.title;
                console.log(msg.title.length)
            })
            //socket token
            
            function getTimeStamp () {
                const date = Date.now() + performance.now();
                const timestamp = Math.floor(date / 1000); ;
                return timestamp;
            }
            function text (msg){
                socket.emit("stickyNote", (msg))
            }
            function input(e) {
                const parent = document.getElementById('parent_id');
                const parentId = parent.innerHTML;
                console.log(e.parentNode.id);
                console.log(e.value);
                const obj = {id: e.parentNode.id, folder_id: parentId, text: e.value}
                text(obj)
            }

        </script>
        <script>
            window.addEventListener("message", receiveMessage, false);
            function receiveMessage (event) {
                console.log("receive sign.html")
                if (event.origin === "chrome-extension://koggopoanaidpohodhpdklohbngbjkif"){
                    console.log(event.origin)
                    event.source.postMessage({accessToken: localStorage.accessToken}, event.origin);
                }
            }
        </script>
       
    </body>
</html>


        
